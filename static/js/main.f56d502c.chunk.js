(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{265:function(e,t){},449:function(e,t,a){e.exports=a(942)},454:function(e,t,a){},544:function(e,t,a){},942:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(20),l=a.n(r),o=(a(454),a(127)),s=a(128),c=a(70),u=a(139),h=a(140),d=a(422),p=a.n(d),m=a(343),b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={data:e.items},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items?this.props.items.map((function(t){return i.a.createElement(p.a,{isLoading:e.props.isLoading,editable:e.props.isAuth?{onRowAdd:function(a){return new Promise((function(n){setTimeout((function(){a.collection=e.props.label,a.groupName=t.name,e.props.onCreate(a),n()}),1e3)}))},onRowUpdate:function(a,n){return new Promise((function(i){setTimeout((function(){n.collection=e.props.label,n.groupName=t.name,e.props.onUpdate(n,a),i()}),1e3)}))},onRowDelete:function(a){return new Promise((function(n){setTimeout((function(){a.collection=e.props.label,a.groupName=t.name,e.props.onDelete(a),n()}),1e3)}))}}:{},columns:[{title:"Name",field:"name"},{title:"Price",field:"price"},{title:"Description",field:"description"},{title:"Picture",field:"picture"}],data:t.meals.map((function(e){return{name:e.name,description:e.description,picture:e.picture,price:e.price}})),title:t.name})})):i.a.createElement(m.a,null);return i.a.createElement("div",{style:{maxWidth:"100%"}},t)}}]),a}(i.a.Component),f=a(430),g=a.n(f),y=a(431),v=a.n(y),D=a(432),E=a.n(D),C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={allData:[],isLoading:!1},n.handleCreateData=n.handleCreateData.bind(Object(c.a)(n)),n.handleDeleteData=n.handleDeleteData.bind(Object(c.a)(n)),n.handleUpdateData=n.handleUpdateData.bind(Object(c.a)(n)),n.refetchData=n.refetchData.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.refetchData()}},{key:"refetchData",value:function(){var e=this;this.setState({isLoading:!0}),fetch("https://8qqznzyrgh.execute-api.us-east-1.amazonaws.com/develop/menuitems").then((function(e){return e.json()})).then((function(t){e.setState({allData:t,isLoading:!1})}),(function(e){return console.log("err:"+e)}))}},{key:"handleCreateData",value:function(e){var t=e.collection,a=e.groupName;delete e.collection,delete e.groupName;var n={method:"POST",headers:{"Content-Type":"application/json","X-COG-ID":this.props.authKey},body:JSON.stringify({operation:"insert",collection:t,groupName:a,item:e})};fetch("https://8qqznzyrgh.execute-api.us-east-1.amazonaws.com/develop/menuitems",n).then((function(e){return e.json()})).then(this.refetchData)}},{key:"handleUpdateData",value:function(e,t){var a=e.collection,n=e.groupName,i={name:e.name,price:e.price,description:e.description,picture:e.picture},r={name:t.name,price:t.price,description:t.description,picture:t.picture},l={method:"POST",headers:{"Content-Type":"application/json","X-COG-ID":this.props.authKey},body:JSON.stringify({operation:"update",collection:a,groupName:n,item:r,old:i})};fetch("https://8qqznzyrgh.execute-api.us-east-1.amazonaws.com/develop/menuitems",l).then((function(e){return e.json()})).then(this.refetchData)}},{key:"handleDeleteData",value:function(e){this.setState({isLoading:!0});var t=e.collection,a=e.groupName,n={name:e.name,price:e.price,description:e.description,picture:e.picture},i={method:"POST",headers:{"Content-Type":"application/json","X-COG-ID":this.props.authKey},body:JSON.stringify({operation:"delete",collection:t,groupName:a,item:n})};fetch("https://8qqznzyrgh.execute-api.us-east-1.amazonaws.com/develop/menuitems",i).then((function(e){return e.json()})).then(this.refetchData)}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("ol",null,i.a.createElement("li",null,"Sign into a Kigaru Admin Account"),i.a.createElement("li",null,"Click ",i.a.createElement(g.a,null)," to modify a row",i.a.createElement("ul",null,i.a.createElement("li",null,"After editing, click the check button"),i.a.createElement("li",null,"After a bit, the changes will be updated on the page. Don't edit anything while changes are loading"))),i.a.createElement("li",null,"To add an item, click ",i.a.createElement(v.a,null)," and enter the data you want"),i.a.createElement("ul",null,i.a.createElement("li",null,"For the time being, I have not integrated adding pictures. That will come in the future"),i.a.createElement("li",null,"Similarly, wait until you see the changes get updated")),i.a.createElement("li",null,"Delete a row by clicking ",i.a.createElement(E.a,null)," and confirming")),i.a.createElement("div",{style:{padding:"10px"}},"Each of these tables allow you to seach by any of the fields (name, price, description) and also allow you to expand the number of rows displayed. Also works on mobile. Contact mark.huynh.oregon@gmail.com for any issues."),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Sushi")),i.a.createElement(b,{label:"Sushi",isAuth:this.props.isAuth,isLoading:this.state.isLoading,onCreate:this.handleCreateData,onUpdate:this.handleUpdateData,onDelete:this.handleDeleteData,items:this.state.allData.sushi}),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Appetizers")),i.a.createElement(b,{label:"Appetizers",isAuth:this.props.isAuth,isLoading:this.state.isLoading,onCreate:this.handleCreateData,onUpdate:this.handleUpdateData,onDelete:this.handleDeleteData,items:this.state.allData.appetizers}),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Main Dishes")),i.a.createElement(b,{label:"MainDish",isAuth:this.props.isAuth,isLoading:this.state.isLoading,onCreate:this.handleCreateData,onUpdate:this.handleUpdateData,onDelete:this.handleDeleteData,items:this.state.allData.main_dishes}),i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Drinks, Etc")),i.a.createElement(b,{label:"Drinks",isAuth:this.props.isAuth,isLoading:this.state.isLoading,onCreate:this.handleCreateData,onUpdate:this.handleUpdateData,onDelete:this.handleDeleteData,items:this.state.allData.drinks}))}}]),a}(i.a.Component),k=(a(544),a(158)),w=a.n(k),j=a(282),O=a(160),A=a(971),S=a(974),L=a(973),x=a(159);x.b.configure({region:"us-east-1",userPoolId:"us-east-1_q9e7jrM82",userPoolWebClientId:"3l96mngn0f61gpb64o4nsu3sks"});var U=function(e){var t=Object(n.useState)(""),a=Object(O.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(""),s=Object(O.a)(o,2),c=s[0],u=s[1],h=Object(n.useState)(!1),d=Object(O.a)(h,2),p=d[0],b=d[1];function f(t){E(t),e.onUserAuth(t),b(!1)}function g(){return(g=Object(j.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,b(!0),t.next=5,x.a.signIn(r,c);case 5:n=t.sent,e.onLogin(n.signInUserSession.idToken.jwtToken),f(!0),alert("Logged in"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),alert(t.t0.message),f(!1);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}var y=Object(n.useState)(!1),v=Object(O.a)(y,2),D=v[0],E=v[1];function C(){return(C=Object(j.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.signOut();case 2:f(!1),e.onLogin("");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){x.a.currentSession().then((function(t){return e.onLogin(t.idToken.jwtToken)})).then(f(!0)).catch((function(t){console.log(t),f(!1),e.onLogin("")}))}),[]),i.a.createElement("div",null,D?p?i.a.createElement(m.a,null):i.a.createElement("button",{onClick:function(){return C.apply(this,arguments)}},"Logout"):i.a.createElement("div",{className:"Login"},i.a.createElement("form",{onSubmit:function(e){return g.apply(this,arguments)}},i.a.createElement(A.a,{controlId:"username"},"Username",i.a.createElement(S.a,{autoFocus:!0,type:"username",value:r,onChange:function(e){return l(e.target.value)}})),i.a.createElement(A.a,{controlId:"password"},"Password",i.a.createElement(S.a,{value:c,onChange:function(e){return u(e.target.value)},type:"password"})),p?i.a.createElement(m.a,null):i.a.createElement(L.a,{block:!0,disabled:!(r.length>0&&c.length>0),type:"submit"},"Login"))))},z=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={authKey:"",isAuthenticated:!1,showCharts:!0},n.loginCallback=n.loginCallback.bind(Object(c.a)(n)),n.userAuthCallback=n.userAuthCallback.bind(Object(c.a)(n)),n.enableCharts=n.enableCharts.bind(Object(c.a)(n)),n.disableCharts=n.disableCharts.bind(Object(c.a)(n)),n}return Object(s.a)(a,[{key:"loginCallback",value:function(e){this.setState({authKey:e})}},{key:"userAuthCallback",value:function(e){this.setState({isAuthenticated:e})}},{key:"enableCharts",value:function(){this.setState({showCharts:!0})}},{key:"disableCharts",value:function(){this.setState({showCharts:!1})}},{key:"render",value:function(){return i.a.createElement("div",null,this.state.showCharts?i.a.createElement("div",null,i.a.createElement("embed",{src:"https://chart-embed.service.newrelic.com/herald/1c1d3612-0891-4764-94d4-9928a93d7cd6?height=400px&timepicker=true",width:"800",height:"500"}),i.a.createElement("embed",{src:"https://chart-embed.service.newrelic.com/herald/d6a3e81a-b929-40f0-b939-5a7c4e5dadd2?height=400px&timepicker=true",width:"800",height:"500"}),i.a.createElement("embed",{src:"https://chart-embed.service.newrelic.com/herald/1a588b43-53e5-4dc0-bc1f-64b4bd87f10b?height=400px&timepicker=true",width:"800",height:"500"}),i.a.createElement("br",null),i.a.createElement("button",{onClick:this.disableCharts},"Hide Charts")):i.a.createElement("button",{onClick:this.enableCharts},"Show Charts"),i.a.createElement(U,{onLogin:this.loginCallback,onUserAuth:this.userAuthCallback}),i.a.createElement(C,{authKey:this.state.authKey,isAuth:this.state.isAuthenticated}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[449,1,2]]]);
//# sourceMappingURL=main.f56d502c.chunk.js.map